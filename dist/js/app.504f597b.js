(function(){var e={1048:function(){},1713:function(){},2217:function(){},2634:function(){},2732:function(e,a,l){"use strict";var t=l(5130),o=l(6768);function n(e,a,l,t,n,s){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(o.PR,null,[(0,o.bF)(i)],1024)}var s={name:"App",components:{}},i=l(1241);const r=(0,i.A)(s,[["render",n]]);var u=r,c=l(1387),d=l(144),p=l(8569);const m={style:{width:"100%",height:"500px"}};var g={__name:"ImageCut",setup(e){(0,o.pM)({name:"ImageCut"});const a=(0,d.KR)(""),l=(0,d.KR)(null),t=e=>{const l=new FileReader;l.onload=e=>{a.value=e.target.result},l.readAsDataURL(e.raw)},n=()=>{l.value&&l.value.getCropData((e=>{const a=document.createElement("a");a.href=e,a.download="cropped-image.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))};return(e,s)=>{const i=(0,o.g2)("el-button"),r=(0,o.g2)("el-upload");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)((0,d.R1)(p.EJ),{autoCrop:"",img:a.value,ref_key:"cropperRef",ref:l,centerBox:""},null,8,["img"]),(0,o.bF)(r,{class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t,"auto-upload":!1,"show-file-list":!1},{default:(0,o.k6)((()=>[""===a.value?((0,o.uX)(),(0,o.Wv)(i,{key:0,size:"small",type:"primary"},{default:(0,o.k6)((()=>s[0]||(s[0]=[(0,o.eW)("上传图片")]))),_:1})):((0,o.uX)(),(0,o.Wv)(i,{key:1,size:"small",type:"primary"},{default:(0,o.k6)((()=>s[1]||(s[1]=[(0,o.eW)("重新上传")]))),_:1}))])),_:1}),a.value?((0,o.uX)(),(0,o.Wv)(i,{key:0,size:"small",type:"primary",onClick:n},{default:(0,o.k6)((()=>s[2]||(s[2]=[(0,o.eW)("下载")]))),_:1})):(0,o.Q3)("",!0)])}}};const v=g;var k=v;l(6573),l(8100),l(7936),l(7467),l(4732),l(9577),l(4979),l(4603),l(7566),l(8721);const h={key:0},b=["v-slot"],f={key:1},A=["src"];var w={__name:"ImageCompress",setup(e){(0,o.pM)({name:"ImageCompress"});const a=(0,d.KR)(""),l=(0,d.KR)(""),t=e=>{const l=new FileReader;l.onload=e=>{a.value=e.target.result},l.readAsDataURL(e.raw)},n=()=>{if(!a.value)return;const e=s(a.value),t=new Image;t.src=URL.createObjectURL(e),t.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0),e.toBlob((e=>{const a=URL.createObjectURL(e);console.log("压缩后的图片URL:",a),i(a)}),"image/jpeg",l)}},s=e=>{const a=e.split(","),l=a[0].match(/:(.*?);/)[1],t=atob(a[1]);let o=t.length;const n=new Uint8Array(o);while(o--)n[o]=t.charCodeAt(o);return new Blob([n],{type:l})},i=e=>{const a=document.createElement("a");a.href=e,a.download="compressed_image.jpg",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(e,l)=>{const s=(0,o.g2)("el-upload"),i=(0,o.g2)("el-button");return(0,o.uX)(),(0,o.CE)(o.FK,null,[""===a.value?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.bF)(s,{class:"upload-demo",drag:"",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t,"auto-upload":!1,multiple:""},{default:(0,o.k6)((()=>[l[0]||(l[0]=(0,o.Lk)("i",{class:"el-icon-upload"},null,-1)),l[1]||(l[1]=(0,o.Lk)("div",{class:"el-upload__text"},[(0,o.eW)("将文件拖到此处，或"),(0,o.Lk)("em",null,"点击上传")],-1)),(0,o.Lk)("div",{class:"el-upload__tip","v-slot":e.tip},"只能上传jpg/png文件，且不超过500kb",8,b)])),_:1})])):(0,o.Q3)("",!0),a.value?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("img",{class:"copimg",style:{height:"500px",width:"250"},src:a.value},null,8,A),(0,o.bF)(s,{class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t,"auto-upload":!1,"show-file-list":!1},{default:(0,o.k6)((()=>[(0,o.bF)(i,{size:"small",type:"primary"},{default:(0,o.k6)((()=>l[2]||(l[2]=[(0,o.eW)("重新上传")]))),_:1})])),_:1}),(0,o.bF)(i,{size:"small",type:"primary",onClick:n},{default:(0,o.k6)((()=>l[3]||(l[3]=[(0,o.eW)("压缩并下载")]))),_:1})])):(0,o.Q3)("",!0)],64)}}};const L=(0,i.A)(w,[["__scopeId","data-v-81c81556"]]);var y=L,C=l(7477);const F={class:"watermark-container"},E={class:"upload-section"},R={key:0,class:"settings-panel"},U={class:"setting-item"},V={class:"setting-item"},x={class:"setting-item"},_={key:0,class:"setting-item"},I={key:1,class:"setting-item"},W={class:"setting-item"},K={class:"setting-item"},B={class:"setting-item"},S={key:1,class:"preview-area"},Q={class:"preview-container"},X=["src"],T={class:"action-buttons"};var P={__name:"WaterMark",setup(e){const a=(0,d.KR)(""),l=(0,d.KR)("阿松图片大师"),t=(0,d.KR)("#FFFFFF"),n=(0,d.KR)("bottom-right"),s=(0,d.KR)(24),i=(0,d.KR)(.7),r=(0,d.KR)(null),u=(0,d.KR)(""),c=(0,d.KR)("single"),p=(0,d.KR)(100),m=(0,d.KR)(-15),g=e=>{const l=new FileReader;l.onload=e=>{a.value=e.target.result,v()},l.readAsDataURL(e.raw)},v=()=>{if(!a.value)return;const e=new Image;e.onload=()=>{const a=r.value.getContext("2d");r.value.width=e.width,r.value.height=e.height,a.drawImage(e,0,0),a.font=`${s.value}px "SF Pro Display", "Helvetica Neue", Arial, sans-serif`,a.fillStyle=t.value,a.globalAlpha=i.value,"single"===c.value?k(a,e.width,e.height):h(a,e.width,e.height),u.value=r.value.toDataURL("image/png")},e.src=a.value},k=(e,a,t)=>{const o=30,i=e.measureText(l.value).width;let r,u;switch(n.value){case"top-left":r=o,u=s.value+o;break;case"top-right":r=a-i-o,u=s.value+o;break;case"center":r=(a-i)/2,u=t/2;break;case"bottom-left":r=o,u=t-o;break;case"bottom-right":r=a-i-o,u=t-o;break}e.save(),e.translate(r,u),e.rotate(m.value*Math.PI/180),e.fillText(l.value,0,0),e.restore()},h=(e,a,t)=>{const o=p.value,n=Math.ceil(a/o)+1,i=Math.ceil(t/o)+1;for(let r=0;r<i;r++)for(let a=0;a<n;a++){const t=a*o,n=r*o+s.value;e.save(),e.translate(t,n),e.rotate(m.value*Math.PI/180),e.fillText(l.value,0,0),e.restore()}},b=()=>{const e=document.createElement("a");e.download="watermarked-image.png",e.href=u.value,document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(0,o.wB)([l,t,s,i,n,c,p,m],(()=>{a.value&&v()}),{deep:!0}),(e,k)=>{const h=(0,o.g2)("el-icon"),f=(0,o.g2)("el-button"),A=(0,o.g2)("el-upload"),w=(0,o.g2)("el-radio"),L=(0,o.g2)("el-radio-group"),y=(0,o.g2)("el-input"),P=(0,o.g2)("el-color-picker"),O=(0,o.g2)("el-option"),j=(0,o.g2)("el-select"),D=(0,o.g2)("el-slider");return(0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",E,[(0,o.bF)(A,{class:"upload-demo","auto-upload":!1,"show-file-list":!1,onChange:g},{default:(0,o.k6)((()=>[(0,o.bF)(f,{type:"primary",class:"upload-button"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)((0,d.R1)(C.Upload))])),_:1}),k[8]||(k[8]=(0,o.eW)(" 选择图片 "))])),_:1})])),_:1})]),a.value?((0,o.uX)(),(0,o.CE)("div",R,[k[19]||(k[19]=(0,o.Lk)("div",{class:"settings-header"},[(0,o.Lk)("h3",null,"水印设置")],-1)),(0,o.Lk)("div",U,[k[11]||(k[11]=(0,o.Lk)("span",{class:"setting-label"},"水印类型",-1)),(0,o.bF)(L,{modelValue:c.value,"onUpdate:modelValue":k[0]||(k[0]=e=>c.value=e),onChange:v},{default:(0,o.k6)((()=>[(0,o.bF)(w,{label:"single"},{default:(0,o.k6)((()=>k[9]||(k[9]=[(0,o.eW)("单一水印")]))),_:1}),(0,o.bF)(w,{label:"tiled"},{default:(0,o.k6)((()=>k[10]||(k[10]=[(0,o.eW)("铺满水印")]))),_:1})])),_:1},8,["modelValue"])]),(0,o.Lk)("div",V,[k[12]||(k[12]=(0,o.Lk)("span",{class:"setting-label"},"水印文字",-1)),(0,o.bF)(y,{modelValue:l.value,"onUpdate:modelValue":k[1]||(k[1]=e=>l.value=e),placeholder:"输入水印文字",onInput:v},null,8,["modelValue"])]),(0,o.Lk)("div",x,[k[13]||(k[13]=(0,o.Lk)("span",{class:"setting-label"},"水印颜色",-1)),(0,o.bF)(P,{modelValue:t.value,"onUpdate:modelValue":k[2]||(k[2]=e=>t.value=e),onChange:v},null,8,["modelValue"])]),"single"===c.value?((0,o.uX)(),(0,o.CE)("div",_,[k[14]||(k[14]=(0,o.Lk)("span",{class:"setting-label"},"水印位置",-1)),(0,o.bF)(j,{modelValue:n.value,"onUpdate:modelValue":k[3]||(k[3]=e=>n.value=e),placeholder:"选择位置",onChange:v},{default:(0,o.k6)((()=>[(0,o.bF)(O,{label:"左上角",value:"top-left"}),(0,o.bF)(O,{label:"右上角",value:"top-right"}),(0,o.bF)(O,{label:"左下角",value:"bottom-left"}),(0,o.bF)(O,{label:"右下角",value:"bottom-right"}),(0,o.bF)(O,{label:"居中",value:"center"})])),_:1},8,["modelValue"])])):(0,o.Q3)("",!0),"tiled"===c.value?((0,o.uX)(),(0,o.CE)("div",I,[k[15]||(k[15]=(0,o.Lk)("span",{class:"setting-label"},"水印间距",-1)),(0,o.bF)(D,{modelValue:p.value,"onUpdate:modelValue":k[4]||(k[4]=e=>p.value=e),min:50,max:200,onChange:v},null,8,["modelValue"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",W,[k[16]||(k[16]=(0,o.Lk)("span",{class:"setting-label"},"水印角度",-1)),(0,o.bF)(D,{modelValue:m.value,"onUpdate:modelValue":k[5]||(k[5]=e=>m.value=e),min:-45,max:45,onChange:v},null,8,["modelValue"])]),(0,o.Lk)("div",K,[k[17]||(k[17]=(0,o.Lk)("span",{class:"setting-label"},"字体大小",-1)),(0,o.bF)(D,{modelValue:s.value,"onUpdate:modelValue":k[6]||(k[6]=e=>s.value=e),min:12,max:48,onChange:v},null,8,["modelValue"])]),(0,o.Lk)("div",B,[k[18]||(k[18]=(0,o.Lk)("span",{class:"setting-label"},"透明度",-1)),(0,o.bF)(D,{modelValue:i.value,"onUpdate:modelValue":k[7]||(k[7]=e=>i.value=e),min:.1,max:1,step:.1,onChange:v},null,8,["modelValue"])])])):(0,o.Q3)("",!0),a.value?((0,o.uX)(),(0,o.CE)("div",S,[k[21]||(k[21]=(0,o.Lk)("div",{class:"preview-header"},[(0,o.Lk)("h3",null,"预览效果")],-1)),(0,o.Lk)("div",Q,[(0,o.Lk)("img",{src:u.value,class:"preview-image"},null,8,X)]),(0,o.Lk)("div",T,[(0,o.bF)(f,{onClick:b,type:"primary",class:"download-button"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>[(0,o.bF)((0,d.R1)(C.Download))])),_:1}),k[20]||(k[20]=(0,o.eW)(" 下载图片 "))])),_:1})])])):(0,o.Q3)("",!0),(0,o.Lk)("canvas",{ref_key:"canvas",ref:r,style:{display:"none"}},null,512)])}}};const O=(0,i.A)(P,[["__scopeId","data-v-3b8a592a"]]);var j=O,D=l(4232);const N={class:"contain"},H={class:"big-contain",key:"bigContainLogin"},q={class:"bform"},z={key:0,class:"errTips"},G={key:1,class:"errTips"},M={class:"big-contain",key:"bigContainRegister"},Y={class:"bform"},J={key:0,class:"errTips"},Z={class:"small-contain",key:"smallContainRegister"},$={class:"small-contain",key:"smallContainLogin"};function ee(e,a,l,n,s,i){return(0,o.uX)(),(0,o.CE)("div",{class:"login-register",style:(0,D.Tr)(s.background)},[(0,o.Lk)("div",N,[(0,o.Lk)("div",{class:(0,D.C4)(["big-box",{active:s.isLogin}])},[s.isLogin?((0,o.uX)(),(0,o.CE)("div",H,[a[9]||(a[9]=(0,o.Lk)("div",{class:"btitle"},"账户登录",-1)),(0,o.Lk)("div",q,[(0,o.bo)((0,o.Lk)("input",{type:"username",placeholder:"用户名","onUpdate:modelValue":a[0]||(a[0]=e=>s.form.username=e)},null,512),[[t.Jo,s.form.username]]),s.emailError?((0,o.uX)(),(0,o.CE)("span",z,"* 邮箱填写错误 *")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":a[1]||(a[1]=e=>s.form.userpwd=e)},null,512),[[t.Jo,s.form.userpwd]]),s.emailError?((0,o.uX)(),(0,o.CE)("span",G,"* 密码填写错误 *")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{class:"bbutton",onClick:a[2]||(a[2]=(...e)=>i.login&&i.login(...e))},"登录")])):((0,o.uX)(),(0,o.CE)("div",M,[a[11]||(a[11]=(0,o.Lk)("div",{class:"btitle"},"创建账户",-1)),(0,o.Lk)("div",Y,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":a[3]||(a[3]=e=>s.form.username=e)},null,512),[[t.Jo,s.form.username]]),s.existed?((0,o.uX)(),(0,o.CE)("span",J,"* 用户名已经存在！ *")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":a[4]||(a[4]=e=>s.form.userpwd=e)},null,512),[[t.Jo,s.form.userpwd]]),(0,o.bo)((0,o.Lk)("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":a[5]||(a[5]=e=>s.form.useremail=e)},null,512),[[t.Jo,s.form.useremail]]),a[10]||(a[10]=(0,o.Lk)("input",{type:"phone",placeholder:"电话"},null,-1))]),(0,o.Lk)("button",{class:"bbutton",onClick:a[6]||(a[6]=(...e)=>i.register&&i.register(...e))},"注册")]))],2),(0,o.Lk)("div",{class:(0,D.C4)(["small-box",{active:s.isLogin}])},[s.isLogin?((0,o.uX)(),(0,o.CE)("div",Z,[a[12]||(a[12]=(0,o.Lk)("div",{class:"stitle"},"你好，欢迎注册该平台!",-1)),a[13]||(a[13]=(0,o.Lk)("p",{class:"scontent"},null,-1)),(0,o.Lk)("button",{class:"sbutton",onClick:a[7]||(a[7]=(...e)=>i.changeType&&i.changeType(...e))},"注册")])):((0,o.uX)(),(0,o.CE)("div",$,[a[14]||(a[14]=(0,o.Lk)("div",{class:"stitle"},"欢迎回来!",-1)),a[15]||(a[15]=(0,o.Lk)("p",{class:"scontent"},"请登录你的账户",-1)),(0,o.Lk)("button",{class:"sbutton",onClick:a[8]||(a[8]=(...e)=>i.changeType&&i.changeType(...e))},"登录")]))],2)])],4)}l(4114);var ae=l(9122),le=l.n(ae),te={name:"login-register",data(){return{isLogin:!1,emailError:!1,passwordError:!1,existed:!1,form:{username:"",useremail:"",userpwd:""},background:{backgroundImage:"url("+l(4508)+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundColor:"#000",backgroundPosition:"center top"}}},methods:{changeType(){this.isLogin=!this.isLogin,this.form.username="",this.form.useremail="",this.form.userpwd=""},login(){const e=this;let a=le().stringify({username:e.form.username,password:e.form.userpwd});""!=e.form.username&&""!=e.form.userpwd?e.$axios({method:"post",url:"http://127.0.0.1:5000/login",data:a}).then((e=>{switch(console.log(e.data),e.data.status){case 0:this.jumpToHome();break;case-1:this.emailError=!0;break;case 1:this.passwordError=!0,alert("登录失败，密码或账号有误");break}})).catch((e=>{console.log(e)})):alert("填写不能为空！")},register(){const e=this;let a=le().stringify({username:e.form.username,email:e.form.useremail,password:e.form.userpwd});""!=e.form.username&&""!=e.form.useremail&&""!=e.form.userpwd?e.$axios({method:"post",url:"http://127.0.0.1:5000/register",data:a}).then((e=>{switch(e.data.status){case 0:alert("注册成功！"),this.changeType();break;case-1:this.existed=!0;break}console.log(e.data)})).catch((e=>{console.log(e)})):alert("填写不能为空！")},jumpToHome(){this.$router.push({name:"myhome"})}}};const oe=(0,i.A)(te,[["render",ee],["__scopeId","data-v-9fc0f8ca"]]);var ne=oe,se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA1BJREFUaEPNWe112zAMFDSJs0myAeUF4kzieJIkC1jaoNmk6iJGCz1JT6bwQRL0a/zXtIUDDocDBc0DPyGEQ9M0ZwB4pscAwNftdvschmGs9Vio9Ufx/1DwAPCb+f+RgFyv1/caz34kgA8AOElBIuLbMAyfXhAPA3A8Ht8R8awAICq9/VgAIYRnAPilAHgZhuH7JwM4AcAHFyAiPtVq5GoUmhWHVIfUhqgzKQ/XxH3fP3kzv/y+CoAQwjbbRAsp+AYRq3C/GgCG66TxUyWUz4iI1APueeCuQNd11Khixg0QF6+UugCEEFStT+C5uxLFACydTwh+OuLtiSIAlsanBj+fGz2qlA2gcvATBgC4lHqjLAC1aNM0TaxU1AvkjbInczIAh9rsGEWTuG3bU+SViqiUBKBy8KsHYiqabbVNAHHwVOq2bQ+a05QsBEeTzdKzWm9Spn+tQTPCHHQqgFjn5+k58bTrOkxVm5Qmne0IeahliidVQwQQ+RvS6zv7mwOAmjZFKqkacW9Yc0IDsE7ZOPhcKbWCiCsZ/7/2exFA13W0zxLXd4tHLgCqQIp5m/do2iF23kpaQVkAW/pwy4eysLscqOGtWBqyALbK0/f97kwhAAKn9oLVVxwbJACrwnAAZhUqstESn1OSwtGIy+60jFtaHKvUuiEBXBDxVVtqJFm1BiZHZ5Ee1uItNRwFR7dv842EtJmx3kdKimb4pCY+pExBQY0mns8AiWYaiLu1kpsD1DfaTZ5pJTRZkaqwNFsCiO++71+YOUCgSUpHy6G6ANCDOYu9bTYLhPeK0Q2A420clDagLGm1/FYNALvFXsqq1KSSVFvBT82dckg7s1iO7Rlu4Eh0+68VkDyRlFHOKqRYbS2BrgpwAWlNyQ0qa95YDHEBYLxLltfJtdkcmGIAgvqId/7Cefc1uwfAnfpYXI6bvUb2i1WIaV52oi4lF4adO/tFALjrdG3f5ZSqVvaLADDXLOq7rtxGt1Qn/j6rB+JGtHifYjNyA/YCcDXu/HC1X3IB5VbgDoDFZcmJWpXLAZEFIFYTCwAFIiwpriv1LcAsAMzinUyHWY22r1+TbuusamQBiB1lSgWEbevctu2f0pcaxRWIKPGKiO63jFaGre//Agtjsk8mz/P5AAAAAElFTkSuQmCC",ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAehJREFUWEfFl+FRwzAMhdVJgE1gEmASYBJgEmAS2ATy9SLfiyPFdpuj+VOu2NLn5ycpPdiFn8OF89spANdmdmtmfPJcmdnX/Penmf2MHGoE4NnM7iVxlgeA9+mfrG8+PQAEempGWi/oAmkBfMxyn5C/bHnZUmMLYI/kToEaN9EpMoA9k3teDHpXQ0QA9Z2zERlx/ogJ2cf6B0m6uo4agNL6rigfJ+e/zd9pCSKrl5yXJJ/qfqBRU6+CeMAdnxogkh7ZyoZBN9YAbOcwQIQAv0ECVWAw/1H+12rTwpCqQLSYvecoEF3pIqYCQKqGYeFmDXfKEcUtFaEAmM/N5LGp3aHeHkBFPvhXgOgaig9UgciArVbdeQuWxtYEe5egw3VfQQRwTgk6QFRdpReoAtHYTYdIr/bTKN/sLQoQSUWecIh0AmRDrSirALiVDXUpkgslFj28AUAM6p9D1U/aCVno98UiOiABtJW23nJ6XtsWvoqmoZP7qYHQV7KtK4m6niqw8lRU5+padyvfMdu9PWfTMfORQ6zmStZotCJG5kE2fAAIS3qr0ykE0vmpyyxPjDg00lutNuoNrT0KADgK+hvVirkVjA3IigfciK09DtB1da1gSuzvg+lp5sWo1vWriPUjAJ3Nb2zZxQH+AKmKciHf7CxPAAAAAElFTkSuQmCC",re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAYZJREFUWEdjZBhgwDjA9jMMfQe8v66hgB6Kgpo3HhAbshSFwOfb2vsZGBgckC17+lPpSNfdaXv//WNZsCBQkqBDaOOAe9NtGBgYFszzk0kkFBI0c8B/BoYD8/1kHEcdMBoCoyEwGgKjITDsQ+A/ug/Pf7I9uOBpjT3N64LPt3UaGBj+1w+IAz7f1nFgYPgPagtggPzrO2Fi1K2OP93SSmBgYLQHNUAYGRkwWkEgW7/+5b9QdWuVAdgF//83zvOXbaBKIvx0S3s+IyNDAiHDWu7Oe/L6l7QMSN08Pxmi2hpEKQL5npGRcT4uB/z9z/xk/tPaN5c/W5Lke5B5RDkApPDzbW2MFA8SB7UB5z+pUYD5nIGB4cE8PxlFQqEFkyfaAZ9uad+HxT3I0lc/pf9ufZ2ojGQxA7FZD9lxRDtg2+nKgoNvA4qRLUTzZeI8P5kFxPqc5BAAaUja+LiBgZERlvfBljEx/l84x1f2AKkWk+UAkKaE9c8ViGnvE+sgoqOAWANJVTfqAADKJBIwNHSRzwAAAABJRU5ErkJggg==",ue={__name:"Index",setup(e){return(e,a)=>{const l=(0,o.g2)("el-menu-item"),t=(0,o.g2)("el-button"),n=(0,o.g2)("el-menu"),s=(0,o.g2)("el-header"),i=(0,o.g2)("router-view"),r=(0,o.g2)("el-main"),u=(0,o.g2)("el-footer"),c=(0,o.g2)("el-container");return(0,o.uX)(),(0,o.Wv)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.bF)(n,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:e.handleSelect,router:!0},{default:(0,o.k6)((()=>[a[7]||(a[7]=(0,o.Lk)("img",{class:"logo",src:se},null,-1)),a[8]||(a[8]=(0,o.Lk)("text",{class:"text1"},"阿松图片大师",-1)),(0,o.bF)(l,{index:"/cut"},{default:(0,o.k6)((()=>a[1]||(a[1]=[(0,o.eW)("裁切图片")]))),_:1}),(0,o.bF)(l,{index:"/compress"},{default:(0,o.k6)((()=>a[2]||(a[2]=[(0,o.eW)("压缩图片")]))),_:1}),(0,o.bF)(l,{index:"/watermark"},{default:(0,o.k6)((()=>a[3]||(a[3]=[(0,o.eW)("添加水印")]))),_:1}),(0,o.bF)(l,{index:"/subtitle"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.eW)("字幕生成器")]))),_:1}),(0,o.bF)(l,{index:"/poster"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.eW)("豆包海报")]))),_:1}),(0,o.bF)(t,{type:"primary",class:"signin",onClick:a[0]||(a[0]=a=>e.$router.push("/signinup"))},{default:(0,o.k6)((()=>a[6]||(a[6]=[(0,o.eW)("登录")]))),_:1})])),_:1},8,["default-active","onSelect"])])),_:1}),(0,o.bF)(r,null,{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)(o.PR,{include:["ImageCut","ImageCompress","WaterMark","SubtitleGenerator"]},[(0,o.bF)(i)],1024))])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>a[9]||(a[9]=[(0,o.Lk)("a",{href:"https://github.com/GeniusWww",target:"_blank"},[(0,o.Lk)("img",{src:ie,alt:""})],-1),(0,o.Lk)("a",{href:"https://okjk.co/mWL1os",target:"_blank"},[(0,o.Lk)("img",{src:re,alt:""})],-1)]))),_:1})])),_:1})}}};const ce=(0,i.A)(ue,[["__scopeId","data-v-626ad10f"]]);var de=ce,pe=(l(8111),l(7588),l(1219));const me={class:"subtitle-generator"},ge={class:"content-container"},ve={class:"left-section"},ke={class:"panel"},he={class:"upload-section"},be={class:"preview-section"},fe={class:"subtitle-input"},Ae={class:"subtitle-settings"},we={class:"setting-item"},Le={class:"setting-item"},ye={class:"setting-item"},Ce={class:"setting-item"},Fe={class:"controls"},Ee={class:"right-section"},Re={class:"preview-panel"},Ue={class:"result-section"},Ve=["src"],xe={key:1,class:"empty-preview"};var _e={__name:"SubtitleGenerator",setup(e){(0,o.pM)({name:"SubtitleGenerator"});const a=(0,d.KR)(""),l=(0,d.KR)(24),t=(0,d.KR)("#ffffff"),n=(0,d.KR)("Arial"),s=(0,d.KR)(40),i=(0,d.KR)(""),r=(0,d.KR)(null),u=[{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New"},{value:"SimSun",label:"宋体"},{value:"Microsoft YaHei",label:"微软雅黑"}],c=e=>{const a=new FileReader;a.onload=e=>{r.value=e.target.result},a.readAsDataURL(e.raw)},p=()=>{if(!r.value)return void pe.nk.warning("请先上传图片");if(!a.value.trim())return void pe.nk.warning("请输入字幕文本");const e=document.createElement("canvas"),o=e.getContext("2d"),u=new Image;u.onload=()=>{const r=a.value.split("\n");o.font=`${l.value}px ${n.value}`,o.textAlign="center";const c=s.value,d=c*r.length;e.width=u.width,e.height=u.height+d,o.drawImage(u,0,0,u.width,u.height),o.fillStyle=t.value;const p=document.createElement("canvas"),m=p.getContext("2d");p.width=u.width,p.height=c;const g=Math.min(c,.15*u.height),v=u.height-g;m.drawImage(u,0,v,u.width,g,0,0,u.width,c),m.fillStyle="rgba(0, 0, 0, 0.6)",m.fillRect(0,0,p.width,p.height),r.forEach(((e,a)=>{const s=u.height+a*c;o.drawImage(p,0,s),a>0&&(o.strokeStyle="rgba(255, 255, 255, 0.3)",o.lineWidth=1,o.beginPath(),o.moveTo(0,s),o.lineTo(u.width,s),o.stroke()),o.font=`${l.value}px ${n.value}`,o.fillStyle=t.value,o.textAlign="center";const i=s+c/2;o.strokeStyle="#000",o.lineWidth=2,o.strokeText(e,u.width/2,i),o.fillText(e,u.width/2,i)})),i.value=e.toDataURL("image/png")},u.src=r.value},m=()=>{if(!i.value)return void pe.nk.warning("请先生成字幕图片");const e=document.createElement("a");e.download="subtitle_image.png",e.href=i.value,document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(e,r)=>{const d=(0,o.g2)("el-button"),g=(0,o.g2)("el-upload"),v=(0,o.g2)("el-input"),k=(0,o.g2)("el-input-number"),h=(0,o.g2)("el-color-picker"),b=(0,o.g2)("el-option"),f=(0,o.g2)("el-select");return(0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("div",ge,[(0,o.Lk)("div",ve,[(0,o.Lk)("div",ke,[r[16]||(r[16]=(0,o.Lk)("h3",{class:"panel-title"},"图片上传",-1)),(0,o.Lk)("div",he,[(0,o.bF)(g,{class:"upload-button",action:"https://jsonplaceholder.typicode.com/posts/","on-change":c,"auto-upload":!1,"show-file-list":!0},{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"apple-button upload-btn",type:"primary"},{default:(0,o.k6)((()=>r[5]||(r[5]=[(0,o.eW)("上传图片")]))),_:1})])),_:1})]),(0,o.Lk)("div",be,[r[14]||(r[14]=(0,o.Lk)("div",{class:"panel-title-small"},"字幕文本",-1)),(0,o.Lk)("div",fe,[(0,o.bF)(v,{type:"textarea",rows:5,placeholder:"请输入字幕文本，每行将作为一条字幕",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e)},null,8,["modelValue"])]),r[15]||(r[15]=(0,o.Lk)("div",{class:"panel-title-small"},"字幕设置",-1)),(0,o.Lk)("div",Ae,[(0,o.Lk)("div",we,[r[6]||(r[6]=(0,o.Lk)("span",null,"字体大小",-1)),(0,o.bF)(k,{modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=e=>l.value=e),min:12,max:48,step:2,"controls-position":"right"},null,8,["modelValue"]),r[7]||(r[7]=(0,o.Lk)("span",null,"px",-1))]),(0,o.Lk)("div",Le,[r[8]||(r[8]=(0,o.Lk)("span",null,"字体颜色",-1)),(0,o.bF)(h,{modelValue:t.value,"onUpdate:modelValue":r[2]||(r[2]=e=>t.value=e)},null,8,["modelValue"])]),(0,o.Lk)("div",ye,[r[9]||(r[9]=(0,o.Lk)("span",null,"字体样式",-1)),(0,o.bF)(f,{modelValue:n.value,"onUpdate:modelValue":r[3]||(r[3]=e=>n.value=e),placeholder:"请选择字体"},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(u,(e=>(0,o.bF)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),(0,o.Lk)("div",Ce,[r[10]||(r[10]=(0,o.Lk)("span",null,"字幕高度",-1)),(0,o.bF)(k,{modelValue:s.value,"onUpdate:modelValue":r[4]||(r[4]=e=>s.value=e),min:30,max:100,step:5,"controls-position":"right"},null,8,["modelValue"]),r[11]||(r[11]=(0,o.Lk)("span",null,"px",-1))])]),(0,o.Lk)("div",Fe,[(0,o.bF)(d,{class:"apple-button generate-btn",type:"primary",onClick:p},{default:(0,o.k6)((()=>r[12]||(r[12]=[(0,o.eW)("生成字幕图片")]))),_:1}),i.value?((0,o.uX)(),(0,o.Wv)(d,{key:0,class:"apple-button download-btn",type:"success",onClick:m},{default:(0,o.k6)((()=>r[13]||(r[13]=[(0,o.eW)("下载图片")]))),_:1})):(0,o.Q3)("",!0)])])])]),(0,o.Lk)("div",Ee,[(0,o.Lk)("div",Re,[r[17]||(r[17]=(0,o.Lk)("h3",{class:"panel-title"},"预览",-1)),(0,o.Lk)("div",Ue,[i.value?((0,o.uX)(),(0,o.CE)("img",{key:0,src:i.value,class:"result-image"},null,8,Ve)):((0,o.uX)(),(0,o.CE)("div",xe))])])])])])}}};const Ie=(0,i.A)(_e,[["__scopeId","data-v-72ecab41"]]);var We=Ie,Ke=l(60);const Be={class:"poster-container"},Se={class:"content-wrapper"},Qe={class:"left-panel"},Xe={class:"input-section"},Te={class:"quick-tags-section"},Pe={class:"tag-category"},Oe={class:"tag-group"},je={class:"tag-category"},De={class:"tag-group"},Ne={class:"tag-category"},He={class:"tag-group"},qe={class:"control-section"},ze={class:"right-panel"},Ge={key:0,class:"empty-state"},Me=["src"],Ye={class:"qrcode-section"},Je={key:0,class:"qrcode-preview"};var Ze={__name:"PosterMaster",setup(e){const a=(0,d.KR)(""),l=(0,d.KR)("bottom-right"),t=(0,d.KR)(null);(0,o.wB)(l,(async()=>{if(t.value&&m.value)try{await b()}catch(e){pe.nk.error("二维码位置更新失败")}}));const n=new Ke.YE({token:"pat_ceXDvTAxXSKCB3jmvFYvnMHQJnCfanKs49AsesgnbKTJA09fdJ0vrOxTlIPoM9Ue",baseURL:"https://api.coze.cn",allowPersonalAccessTokenInBrowser:!0}),s=["羊毛毡风格","敦煌壁画","水墨写意","水彩","工笔画","漫画页版面","折纸","儿童画","古埃及壁画"],i=["硬光","柔光","察博朗克光","窗光","明暗分明","戏剧光","电影照明","丁达尔效应","暖光"],r=["四分之三侧","焦点构图","头像","长焦镜头","平铺俯拍","全景镜头"],u=[{value:"1",label:"1:1"},{value:"2",label:"2:3"},{value:"3",label:"4:3"},{value:"4",label:"9:16"},{value:"5",label:"16:9"}],c=(0,d.KR)(""),p=(0,d.KR)(""),m=(0,d.KR)(""),g=(0,d.KR)(!1),v=e=>{const a=c.value;c.value=a?`${a}, ${e}`:e},k=async()=>{if(c.value)if(p.value){g.value=!0;try{const a=await n.workflows.runs.create({workflow_id:"7481600194980446248",parameters:{prompt:c.value,propotion:p.value}});if(!a||!a.data)throw new Error("API返回格式不符合预期");try{const e=JSON.parse(a.data);if(!e.output)throw new Error("解析后的数据中没有output字段");m.value=e.output}catch(e){throw new Error("解析API返回数据失败")}}catch(a){pe.nk.error(`生成海报失败: ${a.message||"请稍后重试"}`)}finally{g.value=!1}}else pe.nk.warning("请选择海报比例");else pe.nk.warning("请输入海报描述")},h=async e=>{if(m.value){t.value=e.raw,a.value=URL.createObjectURL(e.raw);try{await b()}catch(l){pe.nk.error("预览二维码添加失败，但您仍可以继续操作")}}else pe.nk.warning("请在生成海报后再添加二维码")},b=async()=>{if(!t.value||!m.value)return;const e=document.createElement("canvas"),o=e.getContext("2d");try{let t=m.value;if(m.value.startsWith("data:"))t=window._originalPosterUrl||m.value;else{window._originalPosterUrl=m.value;const e=await fetch(m.value);if(!e.ok)throw new Error("获取海报图片失败");const a=await e.blob();t=URL.createObjectURL(a)}const n=new Image;n.crossOrigin="anonymous";const s=new Image,[i,r]=await Promise.all([new Promise(((e,a)=>{n.onload=()=>e(n),n.onerror=()=>a(new Error("海报图片加载失败")),n.src=t})),new Promise(((e,l)=>{s.onload=()=>e(s),s.onerror=()=>l(new Error("二维码图片加载失败")),s.src=a.value}))]);e.width=i.width,e.height=i.height,o.clearRect(0,0,e.width,e.height),o.drawImage(i,0,0);const u=.15*Math.min(i.width,i.height),c=.1*u;let d,p;switch(l.value){case"top-left":d=c,p=c;break;case"top-right":d=i.width-u-c,p=c;break;case"bottom-left":d=c,p=i.height-u-c;break;case"bottom-right":d=i.width-u-c,p=i.height-u-c;break;default:throw new Error("无效的二维码位置")}o.drawImage(r,d,p,u,u);const g=e.toDataURL("image/png");if(!(g.length>0))throw new Error("海报生成失败");m.value.startsWith("data:")||URL.revokeObjectURL(t),m.value=g}catch(n){throw console.error("添加二维码时发生错误:",n),pe.nk.error(`添加二维码失败: ${n.message}`),n}finally{const e=m.value;e.startsWith("data:")||URL.revokeObjectURL(e)}};return(e,t)=>{const n=(0,o.g2)("el-input"),b=(0,o.g2)("el-tag"),f=(0,o.g2)("el-option"),A=(0,o.g2)("el-select"),w=(0,o.g2)("el-button"),L=(0,o.g2)("el-icon"),y=(0,o.g2)("el-upload");return(0,o.uX)(),(0,o.CE)("div",Be,[(0,o.Lk)("div",Se,[(0,o.Lk)("div",Qe,[t[7]||(t[7]=(0,o.Lk)("h2",null,"自定义海报生成",-1)),(0,o.Lk)("div",Xe,[(0,o.bF)(n,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"textarea",rows:4,placeholder:"请输入您想要生成的海报描述...",class:"prompt-input"},null,8,["modelValue"]),(0,o.Lk)("div",Te,[(0,o.Lk)("div",Pe,[t[3]||(t[3]=(0,o.Lk)("h3",null,"创意风格",-1)),(0,o.Lk)("div",Oe,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(s,(e=>(0,o.bF)(b,{key:e,class:"tag-item",onClick:a=>v(e),effect:"plain"},{default:(0,o.k6)((()=>[(0,o.eW)((0,D.v_)(e),1)])),_:2},1032,["onClick"]))),64))])]),(0,o.Lk)("div",je,[t[4]||(t[4]=(0,o.Lk)("h3",null,"光线",-1)),(0,o.Lk)("div",De,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(i,(e=>(0,o.bF)(b,{key:e,class:"tag-item",onClick:a=>v(e),effect:"plain"},{default:(0,o.k6)((()=>[(0,o.eW)((0,D.v_)(e),1)])),_:2},1032,["onClick"]))),64))])]),(0,o.Lk)("div",Ne,[t[5]||(t[5]=(0,o.Lk)("h3",null,"镜头语言",-1)),(0,o.Lk)("div",He,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(r,(e=>(0,o.bF)(b,{key:e,class:"tag-item",onClick:a=>v(e),effect:"plain"},{default:(0,o.k6)((()=>[(0,o.eW)((0,D.v_)(e),1)])),_:2},1032,["onClick"]))),64))])])]),(0,o.Lk)("div",qe,[(0,o.bF)(A,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),placeholder:"选择海报比例",class:"ratio-select"},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(u,(e=>(0,o.bF)(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),(0,o.bF)(w,{type:"primary",onClick:k,loading:g.value,class:"generate-btn"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("生成海报")]))),_:1},8,["loading"])])])]),(0,o.Lk)("div",ze,[(0,o.Lk)("div",{class:(0,D.C4)(["preview-section",{"has-image":m.value}])},[m.value?((0,o.uX)(),(0,o.CE)("img",{key:1,src:m.value,class:"poster-image"},null,8,Me)):((0,o.uX)(),(0,o.CE)("div",Ge,[(0,o.bF)(L,{class:"empty-icon"},{default:(0,o.k6)((()=>[(0,o.bF)((0,d.R1)(C.PictureRounded))])),_:1}),t[8]||(t[8]=(0,o.Lk)("p",null,"生成的海报将在这里显示",-1))]))],2)]),(0,o.Lk)("div",Ye,[t[10]||(t[10]=(0,o.Lk)("h3",null,"二维码/logo设置",-1)),(0,o.bF)(y,{class:"qrcode-upload",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/*",onChange:h},{default:(0,o.k6)((()=>[(0,o.bF)(w,{type:"primary",plain:""},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)("上传")]))),_:1})])),_:1}),a.value?((0,o.uX)(),(0,o.CE)("div",Je,[(0,o.bF)(A,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),placeholder:"选择二维码位置",class:"position-select"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{label:"左上角",value:"top-left"}),(0,o.bF)(f,{label:"右上角",value:"top-right"}),(0,o.bF)(f,{label:"左下角",value:"bottom-left"}),(0,o.bF)(f,{label:"右下角",value:"bottom-right"})])),_:1},8,["modelValue"])])):(0,o.Q3)("",!0)])])])}}};const $e=(0,i.A)(Ze,[["__scopeId","data-v-1541387a"]]);var ea=$e;const aa=[{path:"/",name:"Index",component:de,children:[{path:"",redirect:"/subtitle"},{path:"/cut",name:"ImageCut",component:k},{path:"/compress",name:"ImageCompress",component:y},{path:"/watermark",name:"WaterMark",component:j},{path:"/subtitle",name:"SubtitleGenerator",component:We},{path:"/poster",name:"PosterMaster",component:ea}]},{path:"/signinup",name:"SigninOrup",component:ne}],la=(0,c.aE)({history:(0,c.LA)("/"),routes:aa});var ta=la,oa=(l(4188),l(5835));const na=(0,t.Ef)(u);na.use(oa.A),na.use(ta);for(const[sa,ia]of Object.entries(C))na.component(sa,ia);na.mount("#app")},4508:function(e,a,l){"use strict";e.exports=l.p+"img/background_lg.905db7eb.jpg"},5993:function(){}},a={};function l(t){var o=a[t];if(void 0!==o)return o.exports;var n=a[t]={exports:{}};return e[t].call(n.exports,n,n.exports,l),n.exports}l.m=e,function(){var e=[];l.O=function(a,t,o,n){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],n=e[c][2];for(var i=!0,r=0;r<t.length;r++)(!1&n||s>=n)&&Object.keys(l.O).every((function(e){return l.O[e](t[r])}))?t.splice(r--,1):(i=!1,n<s&&(s=n));if(i){e.splice(c--,1);var u=o();void 0!==u&&(a=u)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,o,n]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var o,n,s=t[0],i=t[1],r=t[2],u=0;if(s.some((function(a){return 0!==e[a]}))){for(o in i)l.o(i,o)&&(l.m[o]=i[o]);if(r)var c=r(l)}for(a&&a(t);u<s.length;u++)n=s[u],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(c)},t=self["webpackChunkimagemaster"]=self["webpackChunkimagemaster"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(2732)}));t=l.O(t)})();
//# sourceMappingURL=app.504f597b.js.map